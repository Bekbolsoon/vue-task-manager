(function(){"use strict";var t={862:function(t,e,s){var n=s(471),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("TaskBoard")],1)},i=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-board"},[t._l(t.sections,(function(s){return e("TaskColumn",{key:s.id,attrs:{section:s},on:{"show-context-menu":t.showContextMenu,"delete-task":t.deleteTask,"show-task-form":t.showTaskForm,"cancel-adding-task":t.cancelAddingTask,"add-task":t.addTask,"drag-start":t.dragStart,"drag-end":t.dragEnd}})})),e("Modal",{attrs:{isVisible:t.isModalVisible,taskText:t.taskTextToDelete},on:{close:t.closeModal,confirm:t.confirmDeleteTask}})],2)},r=[],l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-column"},[e("h2",{staticClass:"task-column-title",class:{blue:"Новые"===t.section.title,yellow:"В процессе"===t.section.title,green:"Готово"===t.section.title,red:"Доработать"===t.section.title}},[t._v(" "+t._s(t.section.title)+" ")]),e("div",{staticClass:"task-column__inner"},[e("draggable",{staticClass:"task-list",attrs:{group:"tasks"},on:{start:t.dragStart,end:t.dragEnd},model:{value:t.section.tasks,callback:function(e){t.$set(t.section,"tasks",e)},expression:"section.tasks"}},t._l(t.section.tasks,(function(s){return e("TaskItem",{key:s.id,attrs:{task:s,sectionId:t.section.id},on:{"show-context-menu":t.showContextMenu,"delete-task":t.deleteTask}})})),1),t.section.showForm?e("TaskForm",{on:{"add-task":function(e){return t.addTask(t.section.id,e)},close:function(e){return t.cancelAddingTask(t.section.id)}}}):e("button",{staticClass:"add-button",on:{click:function(e){return t.showTaskForm(t.section.id)}}},[e("svg",{attrs:{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M7.20002 1.16667V12.8333M1.36668 7H13.0334",stroke:"#3D86F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" Добавить ")])],1)])},d=[],c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-item"},[e("p",{staticClass:"task-item-text"},[t._v(t._s(t.task.text))]),e("button",{ref:`menuButton-${t.task.id}`,staticClass:"task-item__menu-btn",on:{click:function(e){return t.showContextMenu(t.task.id,t.sectionId,e)}}},[e("svg",{attrs:{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M10.2 10.8333C10.6603 10.8333 11.0334 10.4602 11.0334 10C11.0334 9.53977 10.6603 9.16667 10.2 9.16667C9.73978 9.16667 9.36669 9.53977 9.36669 10C9.36669 10.4602 9.73978 10.8333 10.2 10.8333Z",stroke:"#86949E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),e("path",{attrs:{d:"M16.0334 10.8333C16.4936 10.8333 16.8667 10.4602 16.8667 10C16.8667 9.53977 16.4936 9.16667 16.0334 9.16667C15.5731 9.16667 15.2 9.53977 15.2 10C15.2 10.4602 15.5731 10.8333 16.0334 10.8333Z",stroke:"#86949E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),e("path",{attrs:{d:"M4.36669 10.8333C4.82693 10.8333 5.20002 10.4602 5.20002 10C5.20002 9.53977 4.82693 9.16667 4.36669 9.16667C3.90645 9.16667 3.53336 9.53977 3.53336 10C3.53336 10.4602 3.90645 10.8333 4.36669 10.8333Z",stroke:"#86949E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])]),t.activeContextMenu&&t.activeContextMenu.taskId===t.task.id&&t.activeContextMenu.sectionId===t.sectionId?e("ContextMenu",{attrs:{taskId:t.task.id},on:{"delete-task":t.deleteTask}}):t._e()],1)},u=[],k=function(){var t=this,e=t._self._c;return e("div",{ref:`contextMenu-${t.taskId}`,staticClass:"context-menu"},[e("button",{staticClass:"context-menu__item",on:{click:function(e){return t.deleteTask(t.taskId)}}},[e("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M2.5 4.99999H17.5M6.66667 4.99999V3.33332C6.66667 2.8913 6.84226 2.46737 7.15482 2.15481C7.46738 1.84225 7.89131 1.66666 8.33333 1.66666H11.6667C12.1087 1.66666 12.5326 1.84225 12.8452 2.15481C13.1577 2.46737 13.3333 2.8913 13.3333 3.33332V4.99999M15.8333 4.99999V16.6667C15.8333 17.1087 15.6577 17.5326 15.3452 17.8452C15.0326 18.1577 14.6087 18.3333 14.1667 18.3333H5.83333C5.39131 18.3333 4.96738 18.1577 4.65482 17.8452C4.34226 17.5326 4.16667 17.1087 4.16667 16.6667V4.99999H15.8333Z",stroke:"#86949E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]),t._v(" Удалить ")])])},h=[],f={props:{taskId:{type:Number,required:!0}},methods:{deleteTask(t){this.$emit("delete-task",t)}}},m=f,p=s(656),v=(0,p.A)(m,k,h,!1,null,"ce4f7ea4",null),w=v.exports,x={components:{ContextMenu:w},props:{task:{type:Object,required:!0},sectionId:{type:Number,required:!0}},data(){return{activeContextMenu:null}},methods:{showContextMenu(t,e,s){this.activeContextMenu={taskId:t,sectionId:e},this.$emit("show-context-menu",t,e,s)},deleteTask(t,e){this.$emit("delete-task",t,e)}}},g=x,C=(0,p.A)(g,c,u,!1,null,"3ab94e0f",null),T=C.exports,b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-form"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.taskText,expression:"taskText"}],ref:"textarea",staticClass:"task-form__input",attrs:{placeholder:"Введите текст..."},domProps:{value:t.taskText},on:{input:[function(e){e.target.composing||(t.taskText=e.target.value)},t.autoResize]}}),e("div",{staticClass:"task-form__btns"},[e("button",{on:{click:t.cancelAddingTask}},[e("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M15 5L5 15M5 5L15 15",stroke:"#F53D5C","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])]),e("button",{on:{click:t.submitTask}},[e("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M16.6666 5L7.49998 14.1667L3.33331 10",stroke:"#22C33D","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])])])])},_=[],M={data(){return{taskText:""}},methods:{submitTask(){this.taskText.trim()&&(this.$emit("add-task",this.taskText.trim()),this.taskText="")},cancelAddingTask(){this.$emit("close")},autoResize(t){const e=t.target;e.style.height="auto",e.style.height=e.scrollHeight-16+"px"},focusTextarea(){this.$refs.textarea.focus()}},mounted(){this.focusTextarea()}},y=M,$=(0,p.A)(y,b,_,!1,null,"a9b5baf2",null),I=$.exports,j=s(432),F=s.n(j),O={components:{TaskItem:T,TaskForm:I,draggable:F()},props:{section:{type:Object,required:!0}},methods:{showContextMenu(t,e,s){this.$emit("show-context-menu",t,e,s)},deleteTask(t,e){this.$emit("delete-task",t,e)},showTaskForm(t){this.$emit("show-task-form",t)},cancelAddingTask(t){this.$emit("cancel-adding-task",t)},addTask(t,e){this.$emit("add-task",t,e)},dragStart(){this.$emit("drag-start")},dragEnd(){this.$emit("drag-end")}}},A=O,D=(0,p.A)(A,l,d,!1,null,"69ffead2",null),S=D.exports,E=function(){var t=this,e=t._self._c;return t.isVisible?e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-content__btn-close",on:{click:t.close}},[e("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M18 6L6 18M6 6L18 18",stroke:"#86949E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])]),e("h2",{staticClass:"modal-content__title"},[t._v("Удалить задачу?")]),e("p",{staticClass:"modal-content__text"},[t._v(t._s(t.taskText))]),e("div",{staticClass:"modal-content__btns"},[e("button",{on:{click:t.confirm}},[t._v("Удалить")]),e("button",{on:{click:t.close}},[t._v("Отмена")])])])]):t._e()},V=[],B={props:{isVisible:{type:Boolean,required:!0},taskText:{type:String,default:""}},methods:{close(){this.$emit("close")},confirm(){this.$emit("confirm")}}},L=B,H=(0,p.A)(L,E,V,!1,null,"2baf6090",null),q=H.exports,P={components:{TaskColumn:S,Modal:q},data(){return{sections:[{id:1,title:"На согласовании",tasks:[],showForm:!1},{id:2,title:"Новые",tasks:[],showForm:!1},{id:3,title:"В процессе",tasks:[],showForm:!1},{id:4,title:"Готово",tasks:[],showForm:!1},{id:5,title:"Доработать",tasks:[],showForm:!1}],taskToDelete:null,taskTextToDelete:"",isModalVisible:!1,taskSectionId:null,activeContextMenu:null}},mounted(){document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},methods:{showContextMenu(t,e,s){this.activeContextMenu={taskId:t,sectionId:e},this.$nextTick((()=>{const e=s.target,n=this.$refs[`contextMenu-${t}`];if(!n||!n[0])return;const o=n[0],i=e.getBoundingClientRect();o.style.top=`${i.bottom}px`,o.style.left=`${i.left}px`}))},deleteTask(t,e){const s=this.sections.find((t=>t.id===e)),n=s.tasks.find((e=>e.id===t));this.taskToDelete=t,this.taskTextToDelete=n.text,this.taskSectionId=e,this.isModalVisible=!0,this.activeContextMenu=null},closeModal(){this.isModalVisible=!1,this.taskToDelete=null,this.taskSectionId=null,this.taskTextToDelete=""},confirmDeleteTask(){const t=this.sections.find((t=>t.id===this.taskSectionId)),e=t.tasks.findIndex((t=>t.id===this.taskToDelete));e>-1&&(t.tasks.splice(e,1),alert("Задача удалена")),this.closeModal()},showTaskForm(t){this.sections.forEach((e=>e.showForm=e.id===t))},cancelAddingTask(t){const e=this.sections.find((e=>e.id===t));e.showForm=!1},addTask(t,e){const s=this.sections.find((e=>e.id===t));s.tasks.push({id:Date.now(),text:e}),s.showForm=!1,alert(`Задача создана в "${s.title}"`)},dragStart(){console.log("Перетаскивание началось")},dragEnd(){console.log("Перетаскивание завершено")}}},Z=P,N=(0,p.A)(Z,a,r,!1,null,"5877f258",null),R=N.exports,z={components:{TaskBoard:R}},U=z,G=(0,p.A)(U,o,i,!1,null,null,null),J=G.exports;n.Ay.config.productionTip=!1,new n.Ay({render:function(t){return t(J)}}).$mount("#app")}},e={};function s(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,n,o,i){if(!n){var a=1/0;for(c=0;c<t.length;c++){n=t[c][0],o=t[c][1],i=t[c][2];for(var r=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(s.O).every((function(t){return s.O[t](n[l])}))?n.splice(l--,1):(r=!1,i<a&&(a=i));if(r){t.splice(c--,1);var d=o();void 0!==d&&(e=d)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[n,o,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,i,a=n[0],r=n[1],l=n[2],d=0;if(a.some((function(e){return 0!==t[e]}))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(l)var c=l(s)}for(e&&e(n);d<a.length;d++)i=a[d],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(c)},n=self["webpackChunktask_manager"]=self["webpackChunktask_manager"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[504],(function(){return s(862)}));n=s.O(n)})();
//# sourceMappingURL=app.29d46bbc.js.map